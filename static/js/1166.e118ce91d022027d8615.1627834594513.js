(self.webpackChunktemp=self.webpackChunktemp||[]).push([[1166],{1166:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ DataHelper)\n/* harmony export */ });\n/* harmony import */ var _constant_common_constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(77081);\n/* harmony import */ var _constant_forcast_station_constant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82102);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(30381);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);\n\r\n\r\n\r\nvar DataHelper = /** @class */ (function () {\r\n    function DataHelper() {\r\n    }\r\n    DataHelper.deepClone = function (source) {\r\n        if (source === undefined)\r\n            return undefined;\r\n        var json = JSON.stringify(source);\r\n        return JSON.parse(json);\r\n    };\r\n    DataHelper.insertAndShift = function (arr, from, to) {\r\n        var cutOut = arr.splice(from, 1)[0]; // cut the element at index 'from'\r\n        arr.splice(to, 0, cutOut); // insert it at index 'to'\r\n    };\r\n    DataHelper.getMinMaxTemp = function (temp, forecastDateApplyWithCurrent) {\r\n        if (forecastDateApplyWithCurrent === void 0) { forecastDateApplyWithCurrent = 0; }\r\n        var hours = Object.keys(temp).filter(function (x) { return x.includes('_'); });\r\n        var tempValue = [];\r\n        var limitDate = (forecastDateApplyWithCurrent * 24) + 24;\r\n        for (var index = forecastDateApplyWithCurrent * 24; index < limitDate; index++) {\r\n            tempValue.push(temp[hours[index]]);\r\n        }\r\n        return {\r\n            min: Math.min.apply(Math, tempValue),\r\n            max: Math.max.apply(Math, tempValue),\r\n        };\r\n    };\r\n    DataHelper.getDataByHour = function (temp, offset) {\r\n        var hours = Object.keys(temp).filter(function (x) { return x.includes('_'); });\r\n        hours = hours.sort(function (a, b) {\r\n            return parseInt(a.substr(1), 10) - parseInt(b.substr(1), 10);\r\n        });\r\n        var refDate = Object.keys(temp).filter(function (x) { return x.includes('refDate'); });\r\n        var diffHours = moment__WEBPACK_IMPORTED_MODULE_2___default()().add(offset, 'hours').diff(moment__WEBPACK_IMPORTED_MODULE_2___default()(temp[refDate[0]]), 'hours');\r\n        var result = diffHours;\r\n        return temp[hours[result]];\r\n    };\r\n    DataHelper.getMostFrequentIcon = function (temp, date) {\r\n        var originalHour = new Date().getHours();\r\n        var currentHour = originalHour;\r\n        var arr = new Array();\r\n        // Get most frequent icon at daylight from 6:00 to 18:00 for next 5 day\r\n        if (currentHour >= 6 && currentHour <= 18) {\r\n            if (date != 0) {\r\n                currentHour = 6;\r\n            }\r\n            for (var i = currentHour; i <= 18; i++) {\r\n                arr.push(DataHelper.getDataByDateHour(temp, date, i));\r\n            }\r\n        }\r\n        // Get most frequent icon at night from 19:00 to 5:00 next day for next 5 day\r\n        else {\r\n            if (date == 0) {\r\n                if (currentHour >= 0 && currentHour <= 5) {\r\n                    currentHour = currentHour + 24;\r\n                }\r\n            }\r\n            else {\r\n                currentHour = 19;\r\n            }\r\n            for (var i = currentHour; i <= 5 + 24; i++) {\r\n                if (i <= 23) {\r\n                    if (originalHour > 5) {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date, i));\r\n                    }\r\n                    else {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date - 1, i));\r\n                    }\r\n                }\r\n                else {\r\n                    if (originalHour > 5) {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date + 1, i - 24));\r\n                    }\r\n                    else {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date, i - 24));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var hashmap = arr.reduce(function (acc, val) {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(hashmap).reduce(function (a, b) { return hashmap[a] > hashmap[b] ? a : b; });\r\n    };\r\n    DataHelper.getMostFrequent = function (temp, weatherType) {\r\n        var currentHour = new Date().getHours();\r\n        var arr = new Array();\r\n        if (weatherType === _constant_forcast_station_constant__WEBPACK_IMPORTED_MODULE_1__/* .WEATHER_TYPE.WindDirection */ .Xg.WindDirection) {\r\n            temp.forEach(function (element) {\r\n                arr.push(element.value);\r\n            });\r\n        }\r\n        else if (weatherType === _constant_forcast_station_constant__WEBPACK_IMPORTED_MODULE_1__/* .WEATHER_TYPE.Weather */ .Xg.Weather) {\r\n            if (currentHour >= 6 && currentHour <= 18) {\r\n                for (var i = 6; i <= 18; i++) {\r\n                    if (!temp[i]) {\r\n                        break;\r\n                    }\r\n                    arr.push(temp[i].value);\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < 24; i++) {\r\n                    if (i < 6 || i > 18) {\r\n                        if (!temp[i]) {\r\n                            break;\r\n                        }\r\n                        arr.push(temp[i].value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var hashmap = arr.reduce(function (acc, val) {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(hashmap).reduce(function (a, b) { return hashmap[a] > hashmap[b] ? a : b; });\r\n    };\r\n    DataHelper.getMostFrequentByHorizontal = function (temp) {\r\n        var arr = [];\r\n        temp.forEach(function (element) {\r\n            arr.push(element);\r\n        });\r\n        var hashmap = arr.reduce(function (acc, val) {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(hashmap).reduce(function (a, b) { return hashmap[a] > hashmap[b] ? a : b; });\r\n    };\r\n    DataHelper.getDataByDateHour = function (temp, date, time) {\r\n        var hours = Object.keys(temp).filter(function (x) { return x.includes('_'); });\r\n        hours = hours.sort(function (a, b) {\r\n            return parseInt(a.substr(1), 10) - parseInt(b.substr(1), 10);\r\n        });\r\n        var refDate = Object.keys(temp).filter(function (x) { return x.includes('refDate'); });\r\n        var diffHours = moment__WEBPACK_IMPORTED_MODULE_2___default()().add(date, 'days').hours(time).diff(moment__WEBPACK_IMPORTED_MODULE_2___default()(temp[refDate[0]]), 'hours');\r\n        var result = diffHours > 0 ? diffHours : 1;\r\n        return temp[hours[result]];\r\n    };\r\n    DataHelper.getDisplayHour = function (offset) {\r\n        var displayHour = new Date().getHours() + offset;\r\n        if (displayHour > 23) {\r\n            return displayHour - 24 + ':00';\r\n        }\r\n        return displayHour + ':00';\r\n    };\r\n    DataHelper.getImageArray = function (htmlStr) {\r\n        var node = document.createElement('div');\r\n        node.innerHTML = htmlStr;\r\n        var nodeList = node.querySelectorAll('img');\r\n        var result = [];\r\n        nodeList.forEach(function (el) {\r\n            result.push(el.src);\r\n        });\r\n        return result.filter(function (x) { return x.includes(_constant_common_constant__WEBPACK_IMPORTED_MODULE_0__/* .BASE_CLOUD_URL */ .W1); });\r\n    };\r\n    DataHelper.generateInsertAndDeleteArr = function (entity, original) {\r\n        var originalArr = this.getImageArray(original);\r\n        var entityArr = this.getImageArray(entity);\r\n        var imageNormalDelete = [];\r\n        var imageNormalAdd = [];\r\n        originalArr.forEach(function (element) {\r\n            var img = entityArr.find(function (x) { return x === element; });\r\n            if (!img) {\r\n                imageNormalDelete.push(element);\r\n            }\r\n        });\r\n        entityArr.forEach(function (element) {\r\n            var img = originalArr.find(function (x) { return x === element; });\r\n            if (!img) {\r\n                imageNormalAdd.push(element);\r\n            }\r\n        });\r\n        return { imageNormalDelete: imageNormalDelete, imageNormalAdd: imageNormalAdd };\r\n    };\r\n    DataHelper.create_UUID = function () {\r\n        var dt = new Date().getTime();\r\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (dt + Math.random() * 16) % 16 | 0;\r\n            dt = Math.floor(dt / 16);\r\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n        return uuid;\r\n    };\r\n    DataHelper.convertToNonAccent = function (str) {\r\n        var text = '';\r\n        if (str != null && str !== '') {\r\n            text = str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n        }\r\n        return text;\r\n    };\r\n    DataHelper.generateColorByString = function (str) {\r\n        str = str || \"\";\r\n        var hash = 0;\r\n        var s = str.length > 0 ? 90 : 1; // saturation\r\n        var l = str.length > 0 ? 25 : 90; // lightness\r\n        for (var i = 0; i < str.length; i++) {\r\n            hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n        }\r\n        var h = hash % 360;\r\n        return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';\r\n    };\r\n    return DataHelper;\r\n}());\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wLy4vc3JjL3V0aWxzL2RhdGEtaGVscGVyLnRzPzEyNDQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUMrRDtBQUNJO0FBQ3ZDO0FBRTVCO0lBQUE7SUF1TkEsQ0FBQztJQXROVSxvQkFBUyxHQUFoQixVQUFvQixNQUFXO1FBQzNCLElBQUksTUFBTSxLQUFLLFNBQVM7WUFBRSxPQUFPLFNBQVMsQ0FBQztRQUMzQyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU0seUJBQWMsR0FBckIsVUFBc0IsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFO1FBQy9CLElBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsa0NBQWtDO1FBQ3ZFLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFZLDBCQUEwQjtJQUNwRSxDQUFDO0lBRU0sd0JBQWEsR0FBcEIsVUFBcUIsSUFBSSxFQUFFLDRCQUFnQztRQUFoQywrRUFBZ0M7UUFDdkQsSUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBQyxJQUFJLFFBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQWYsQ0FBZSxDQUFDLENBQUM7UUFDN0QsSUFBTSxTQUFTLEdBQUcsRUFBRTtRQUNwQixJQUFNLFNBQVMsR0FBRyxDQUFDLDRCQUE0QixHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMzRCxLQUFLLElBQUksS0FBSyxHQUFHLDRCQUE0QixHQUFHLEVBQUUsRUFBRSxLQUFLLEdBQUcsU0FBUyxFQUFFLEtBQUssRUFB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QUFFLENBQUMsQ0FBQztTQUMvRDtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxnQ0FBcUIsR0FBNUIsVUFBNkIsR0FBVztRQUNwQyxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQztRQUNoQixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7UUFDYixJQUFNLENBQUMsR0FBRSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhO1FBQy9DLElBQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZO1FBQy9DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLElBQUksR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDbkQ7UUFFRCxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO1FBQ25CLE9BQU8sTUFBTSxHQUFDLENBQUMsR0FBQyxJQUFJLEdBQUMsQ0FBQyxHQUFDLEtBQUssR0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDO0lBQ3hDLENBQUM7SUFDTCxpQkFBQztBQUFELENBQUMiLCJmaWxlIjoiMTE2Ni5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbXBvcnQgeyBCQVNFX0NMT1VEX1VSTCB9IGZyb20gJy4vLi4vY29uc3RhbnQvY29tbW9uLWNvbnN0YW50JztcclxuaW1wb3J0IHsgV0VBVEhFUl9UWVBFIH0gZnJvbSAnQC9jb25zdGFudC9mb3JjYXN0LXN0YXRpb24tY29uc3RhbnQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRGF0YUhlbHBlciB7XHJcbiAgICBzdGF0aWMgZGVlcENsb25lPFQ+KHNvdXJjZTogYW55KTogVCB7XHJcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShzb3VyY2UpO1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbnNlcnRBbmRTaGlmdChhcnIsIGZyb20sIHRvKSB7XHJcbiAgICAgICAgbGV0IGN1dE91dCA9IGFyci5zcGxpY2UoZnJvbSwgMSlbMF07IC8vIGN1dCB0aGUgZWxlbWVudCBhdCBpbmRleCAnZnJvbSdcclxuICAgICAgICBhcnIuc3BsaWNlKHRvLCAwLCBjdXRPdXQpOyAgICAgICAgICAgIC8vIGluc2VydCBpdCBhdCBpbmRleCAndG8nXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldE1pbk1heFRlbXAodGVtcCwgZm9yZWNhc3REYXRlQXBwbHlXaXRoQ3VycmVudCA9IDApIHtcclxuICAgICAgICBjb25zdCBob3VycyA9IE9iamVjdC5rZXlzKHRlbXApLmZpbHRlcih4ID0+IHguaW5jbHVkZXMoJ18nKSk7XHJcbiAgICAgICAgY29uc3QgdGVtcFZhbHVlID0gW11cclxuICAgICAgICBjb25zdCBsaW1pdERhdGUgPSAoZm9yZWNhc3REYXRlQXBwbHlXaXRoQ3VycmVudCAqIDI0KSArIDI0O1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gZm9yZWNhc3REYXRlQXBwbHlXaXRoQ3VycmVudCAqIDI0OyBpbmRleCA8IGxpbWl0RGF0ZTsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICB0ZW1wVmFsdWUucHVzaCh0ZW1wW2hvdXJzW2luZGV4XV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtaW46IE1hdGgubWluKC4uLnRlbXBWYWx1ZSksXHJcbiAgICAgICAgICAgIG1heDogTWF0aC5tYXgoLi4udGVtcFZhbHVlKSxcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERhdGFCeUhvdXIodGVtcCwgb2Zmc2V0KSB7XHJcbiAgICAgICAgbGV0IGhvdXJzID0gT2JqZWN0LmtleXModGVtcCkuZmlsdGVyKHggPT4geC5pbmNsdWRlcygnXycpKTtcclxuICAgICAgICBob3VycyA9IGhvdXJzLnNvcnQoKGEsYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYS5zdWJzdHIoMSksIDEwKSAtIHBhcnNlSW50KGIuc3Vic3RyKDEpLCAxMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJlZkRhdGUgPSBPYmplY3Qua2V5cyh0ZW1wKS5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKCdyZWZEYXRlJykpO1xyXG4gICAgICAgIGNvbnN0IGRpZmZIb3VycyA9IG1vbWVudCgpLmFkZChvZmZzZXQsICdob3VycycpLmRpZmYobW9tZW50KHRlbXBbcmVmRGF0ZVswXV0pLCAnaG91cnMnKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBkaWZmSG91cnM7XHJcbiAgICAgICAgcmV0dXJuIHRlbXBbaG91cnNbcmVzdWx0XV07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldE1vc3RGcmVxdWVudEljb24odGVtcCwgZGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSG91ciA9IG5ldyBEYXRlKCkuZ2V0SG91cnMoKTtcclxuICAgICAgICBsZXQgY3VycmVudEhvdXIgPSBvcmlnaW5hbEhvdXI7XHJcbiAgICAgICAgbGV0IGFyciA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgICAgICAvLyBHZXQgbW9zdCBmcmVxdWVudCBpY29uIGF0IGRheWxpZ2h0IGZyb20gNjowMCB0byAxODowMCBmb3IgbmV4dCA1IGRheVxyXG4gICAgICAgIGlmIChjdXJyZW50SG91ciA+PSA2ICYmIGN1cnJlbnRIb3VyIDw9IDE4KSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlICE9IDApIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRIb3VyID0gNjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRIb3VyOyBpIDw9IDE4OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKERhdGFIZWxwZXIuZ2V0RGF0YUJ5RGF0ZUhvdXIodGVtcCwgZGF0ZSwgaSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdldCBtb3N0IGZyZXF1ZW50IGljb24gYXQgbmlnaHQgZnJvbSAxOTowMCB0byA1OjAwIG5leHQgZGF5IGZvciBuZXh0IDUgZGF5XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlID09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SG91ciA+PSAwICYmIGN1cnJlbnRIb3VyIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SG91ciA9IGN1cnJlbnRIb3VyICsgMjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50SG91ciA9IDE5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudEhvdXI7IGkgPD0gNSArIDI0OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDw9IDIzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsSG91ciA+IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goRGF0YUhlbHBlci5nZXREYXRhQnlEYXRlSG91cih0ZW1wLCBkYXRlLCBpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goRGF0YUhlbHBlci5nZXREYXRhQnlEYXRlSG91cih0ZW1wLCBkYXRlIC0gMSwgaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsSG91ciA+IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goRGF0YUhlbHBlci5nZXREYXRhQnlEYXRlSG91cih0ZW1wLCBkYXRlICsgMSwgaSAtIDI0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goRGF0YUhlbHBlci5nZXREYXRhQnlEYXRlSG91cih0ZW1wLCBkYXRlLCBpIC0gMjQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoYXNobWFwID0gYXJyLnJlZHVjZSgoYWNjLCB2YWwpID0+IHtcclxuICAgICAgICAgICAgYWNjW3ZhbF0gPSAoYWNjW3ZhbF0gfHwgMCApICsgMVxyXG4gICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgfSx7fSlcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoaGFzaG1hcCkucmVkdWNlKChhLCBiKSA9PiBoYXNobWFwW2FdID4gaGFzaG1hcFtiXSA/IGEgOiBiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TW9zdEZyZXF1ZW50KHRlbXAsIHdlYXRoZXJUeXBlKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEhvdXIgPSBuZXcgRGF0ZSgpLmdldEhvdXJzKCk7XHJcbiAgICAgICAgbGV0IGFyciA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgICAgICBpZiAod2VhdGhlclR5cGUgPT09IFdFQVRIRVJfVFlQRS5XaW5kRGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRlbXAuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKGVsZW1lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdlYXRoZXJUeXBlID09PSBXRUFUSEVSX1RZUEUuV2VhdGhlcikge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEhvdXIgPj0gNiAmJiBjdXJyZW50SG91ciA8PSAxOCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDY7IGkgPD0gMTg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGVtcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godGVtcFtpXS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI0OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IDYgfHwgaSA+IDE4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVtcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godGVtcFtpXS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgY29uc3QgaGFzaG1hcCA9IGFyci5yZWR1Y2UoKGFjYywgdmFsKSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1t2YWxdID0gKGFjY1t2YWxdIHx8IDAgKSArIDFcclxuICAgICAgICAgICAgcmV0dXJuIGFjY1xyXG4gICAgICAgIH0se30pXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGhhc2htYXApLnJlZHVjZSgoYSwgYikgPT4gaGFzaG1hcFthXSA+IGhhc2htYXBbYl0gPyBhIDogYik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldE1vc3RGcmVxdWVudEJ5SG9yaXpvbnRhbCh0ZW1wKSB7XHJcbiAgICAgICAgbGV0IGFycjogYW55ID0gW107XHJcbiAgICAgICAgdGVtcC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBhcnIucHVzaChlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgaGFzaG1hcCA9IGFyci5yZWR1Y2UoKGFjYywgdmFsKSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1t2YWxdID0gKGFjY1t2YWxdIHx8IDAgKSArIDFcclxuICAgICAgICAgICAgcmV0dXJuIGFjY1xyXG4gICAgICAgIH0se30pXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGhhc2htYXApLnJlZHVjZSgoYSwgYikgPT4gaGFzaG1hcFthXSA+IGhhc2htYXBbYl0gPyBhIDogYik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERhdGFCeURhdGVIb3VyKHRlbXAsIGRhdGUsIHRpbWUpIHtcclxuICAgICAgICBsZXQgaG91cnMgPSBPYmplY3Qua2V5cyh0ZW1wKS5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKCdfJykpO1xyXG4gICAgICAgIGhvdXJzID0gaG91cnMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYS5zdWJzdHIoMSksIDEwKSAtIHBhcnNlSW50KGIuc3Vic3RyKDEpLCAxMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJlZkRhdGUgPSBPYmplY3Qua2V5cyh0ZW1wKS5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKCdyZWZEYXRlJykpO1xyXG4gICAgICAgIGNvbnN0IGRpZmZIb3VycyA9IG1vbWVudCgpLmFkZChkYXRlLCAnZGF5cycpLmhvdXJzKHRpbWUpLmRpZmYobW9tZW50KHRlbXBbcmVmRGF0ZVswXV0pLCAnaG91cnMnKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBkaWZmSG91cnMgPiAwID8gZGlmZkhvdXJzIDogMTtcclxuICAgICAgICByZXR1cm4gdGVtcFtob3Vyc1tyZXN1bHRdXTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RGlzcGxheUhvdXIob2Zmc2V0KSB7XHJcbiAgICAgICAgbGV0IGRpc3BsYXlIb3VyID0gbmV3IERhdGUoKS5nZXRIb3VycygpICsgb2Zmc2V0O1xyXG4gICAgICAgIGlmIChkaXNwbGF5SG91ciA+IDIzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkaXNwbGF5SG91ciAtIDI0ICsgJzowMCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaXNwbGF5SG91ciArICc6MDAnO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRJbWFnZUFycmF5KGh0bWxTdHIpIHtcclxuICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sU3RyO1xyXG4gICAgICAgIGNvbnN0IG5vZGVMaXN0ID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBub2RlTGlzdC5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goZWwuc3JjKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmZpbHRlcih4ID0+IHguaW5jbHVkZXMoQkFTRV9DTE9VRF9VUkwpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGVJbnNlcnRBbmREZWxldGVBcnIoZW50aXR5OnN0cmluZyAsIG9yaWdpbmFsOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbEFyciA9IHRoaXMuZ2V0SW1hZ2VBcnJheShvcmlnaW5hbCk7XHJcbiAgICAgICAgY29uc3QgZW50aXR5QXJyID0gdGhpcy5nZXRJbWFnZUFycmF5KGVudGl0eSk7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VOb3JtYWxEZWxldGUgPSBbXTtcclxuICAgICAgICBjb25zdCBpbWFnZU5vcm1hbEFkZCA9IFtdO1xyXG4gICAgICAgIG9yaWdpbmFsQXJyLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IGVudGl0eUFyci5maW5kKHggPT4geCA9PT0gZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGlmKCFpbWcpIHtcclxuICAgICAgICAgICAgICAgIGltYWdlTm9ybWFsRGVsZXRlLnB1c2goZWxlbWVudClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVudGl0eUFyci5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbWcgPSBvcmlnaW5hbEFyci5maW5kKHggPT4geCA9PT0gZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGlmICghaW1nKSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZU5vcm1hbEFkZC5wdXNoKGVsZW1lbnQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4geyBpbWFnZU5vcm1hbERlbGV0ZSwgaW1hZ2VOb3JtYWxBZGQgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlX1VVSUQoKSB7XHJcbiAgICAgICAgbGV0IGR0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgbGV0IHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIGxldCByID0gKGR0ICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcclxuICAgICAgICAgICAgZHQgPSBNYXRoLmZsb29yKGR0IC8gMTYpO1xyXG4gICAgICAgICAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KSkudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1dWlkO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjb252ZXJ0VG9Ob25BY2NlbnQoc3RyOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgdGV4dCA9ICcnO1xyXG4gICAgICAgIGlmIChzdHIgIT0gbnVsbCAmJiBzdHIgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRleHQgPSBzdHIubm9ybWFsaXplKFwiTkZEXCIpLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGVDb2xvckJ5U3RyaW5nKHN0cjogc3RyaW5nKSB7XHJcbiAgICAgICAgc3RyID0gc3RyIHx8IFwiXCI7XHJcbiAgICAgICAgbGV0IGhhc2ggPSAwO1xyXG4gICAgICAgIGNvbnN0IHMgPXN0ci5sZW5ndGggPiAwID8gOTAgOiAxOyAvLyBzYXR1cmF0aW9uXHJcbiAgICAgICAgY29uc3QgbCA9IHN0ci5sZW5ndGggPiAwID8gMjU6IDkwOyAvLyBsaWdodG5lc3NcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBoYXNoID0gc3RyLmNoYXJDb2RlQXQoaSkgKyAoKGhhc2ggPDwgNSkgLSBoYXNoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoID0gaGFzaCAlIDM2MDtcclxuICAgICAgICByZXR1cm4gJ2hzbCgnK2grJywgJytzKyclLCAnK2wrJyUpJztcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1166\n")}}]);