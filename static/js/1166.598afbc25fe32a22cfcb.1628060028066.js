(self.webpackChunkdev=self.webpackChunkdev||[]).push([[1166],{1166:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ DataHelper)\n/* harmony export */ });\n/* harmony import */ var _constant_common_constant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(77081);\n/* harmony import */ var _constant_forcast_station_constant__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82102);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(30381);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);\n\r\n\r\n\r\nvar DataHelper = /** @class */ (function () {\r\n    function DataHelper() {\r\n    }\r\n    DataHelper.deepClone = function (source) {\r\n        if (source === undefined)\r\n            return undefined;\r\n        var json = JSON.stringify(source);\r\n        return JSON.parse(json);\r\n    };\r\n    DataHelper.insertAndShift = function (arr, from, to) {\r\n        var cutOut = arr.splice(from, 1)[0]; // cut the element at index 'from'\r\n        arr.splice(to, 0, cutOut); // insert it at index 'to'\r\n    };\r\n    DataHelper.getMinMaxTemp = function (temp, forecastDateApplyWithCurrent) {\r\n        if (forecastDateApplyWithCurrent === void 0) { forecastDateApplyWithCurrent = 0; }\r\n        var hours = Object.keys(temp).filter(function (x) { return x.includes('_'); });\r\n        var tempValue = [];\r\n        var limitDate = (forecastDateApplyWithCurrent * 24) + 24;\r\n        for (var index = forecastDateApplyWithCurrent * 24; index < limitDate; index++) {\r\n            tempValue.push(temp[hours[index]]);\r\n        }\r\n        return {\r\n            min: Math.min.apply(Math, tempValue),\r\n            max: Math.max.apply(Math, tempValue),\r\n        };\r\n    };\r\n    DataHelper.getDataByHour = function (temp, offset) {\r\n        var hours = Object.keys(temp).filter(function (x) { return x.includes('_'); });\r\n        hours = hours.sort(function (a, b) {\r\n            return parseInt(a.substr(1), 10) - parseInt(b.substr(1), 10);\r\n        });\r\n        var refDate = Object.keys(temp).filter(function (x) { return x.includes('refDate'); });\r\n        var diffHours = moment__WEBPACK_IMPORTED_MODULE_2___default()().add(offset, 'hours').diff(moment__WEBPACK_IMPORTED_MODULE_2___default()(temp[refDate[0]]), 'hours');\r\n        var result = diffHours;\r\n        return temp[hours[result]];\r\n    };\r\n    DataHelper.getMostFrequentIcon = function (temp, date) {\r\n        var originalHour = new Date().getHours();\r\n        var currentHour = originalHour;\r\n        var arr = new Array();\r\n        // Get most frequent icon at daylight from 6:00 to 18:00 for next 5 day\r\n        if (currentHour >= 6 && currentHour <= 18) {\r\n            if (date != 0) {\r\n                currentHour = 6;\r\n            }\r\n            for (var i = currentHour; i <= 18; i++) {\r\n                arr.push(DataHelper.getDataByDateHour(temp, date, i));\r\n            }\r\n        }\r\n        // Get most frequent icon at night from 19:00 to 5:00 next day for next 5 day\r\n        else {\r\n            if (date == 0) {\r\n                if (currentHour >= 0 && currentHour <= 5) {\r\n                    currentHour = currentHour + 24;\r\n                }\r\n            }\r\n            else {\r\n                currentHour = 19;\r\n            }\r\n            for (var i = currentHour; i <= 5 + 24; i++) {\r\n                if (i <= 23) {\r\n                    if (originalHour > 5) {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date, i));\r\n                    }\r\n                    else {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date - 1, i));\r\n                    }\r\n                }\r\n                else {\r\n                    if (originalHour > 5) {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date + 1, i - 24));\r\n                    }\r\n                    else {\r\n                        arr.push(DataHelper.getDataByDateHour(temp, date, i - 24));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var hashmap = arr.reduce(function (acc, val) {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(hashmap).reduce(function (a, b) { return hashmap[a] > hashmap[b] ? a : b; });\r\n    };\r\n    DataHelper.getMostFrequent = function (temp, weatherType) {\r\n        var currentHour = new Date().getHours();\r\n        var arr = new Array();\r\n        if (weatherType === _constant_forcast_station_constant__WEBPACK_IMPORTED_MODULE_1__/* .WEATHER_TYPE.WindDirection */ .Xg.WindDirection) {\r\n            temp.forEach(function (element) {\r\n                arr.push(element.value);\r\n            });\r\n        }\r\n        else if (weatherType === _constant_forcast_station_constant__WEBPACK_IMPORTED_MODULE_1__/* .WEATHER_TYPE.Weather */ .Xg.Weather) {\r\n            if (currentHour >= 6 && currentHour <= 18) {\r\n                for (var i = 6; i <= 18; i++) {\r\n                    if (!temp[i]) {\r\n                        break;\r\n                    }\r\n                    arr.push(temp[i].value);\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < 24; i++) {\r\n                    if (i < 6 || i > 18) {\r\n                        if (!temp[i]) {\r\n                            break;\r\n                        }\r\n                        arr.push(temp[i].value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var hashmap = arr.reduce(function (acc, val) {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(hashmap).reduce(function (a, b) { return hashmap[a] > hashmap[b] ? a : b; });\r\n    };\r\n    DataHelper.getMostFrequentByHorizontal = function (temp) {\r\n        var arr = [];\r\n        temp.forEach(function (element) {\r\n            arr.push(element);\r\n        });\r\n        var hashmap = arr.reduce(function (acc, val) {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return Object.keys(hashmap).reduce(function (a, b) { return hashmap[a] > hashmap[b] ? a : b; });\r\n    };\r\n    DataHelper.getDataByDateHour = function (temp, date, time) {\r\n        var hours = Object.keys(temp).filter(function (x) { return x.includes('_'); });\r\n        hours = hours.sort(function (a, b) {\r\n            return parseInt(a.substr(1), 10) - parseInt(b.substr(1), 10);\r\n        });\r\n        var refDate = Object.keys(temp).filter(function (x) { return x.includes('refDate'); });\r\n        var diffHours = moment__WEBPACK_IMPORTED_MODULE_2___default()().add(date, 'days').hours(time).diff(moment__WEBPACK_IMPORTED_MODULE_2___default()(temp[refDate[0]]), 'hours');\r\n        var result = diffHours > 0 ? diffHours : 1;\r\n        return temp[hours[result]];\r\n    };\r\n    DataHelper.getDisplayHour = function (offset) {\r\n        var displayHour = new Date().getHours() + offset;\r\n        if (displayHour > 23) {\r\n            return displayHour - 24 + ':00';\r\n        }\r\n        return displayHour + ':00';\r\n    };\r\n    DataHelper.getImageArray = function (htmlStr) {\r\n        var node = document.createElement('div');\r\n        node.innerHTML = htmlStr;\r\n        var nodeList = node.querySelectorAll('img');\r\n        var result = [];\r\n        nodeList.forEach(function (el) {\r\n            result.push(el.src);\r\n        });\r\n        return result.filter(function (x) { return x.includes(_constant_common_constant__WEBPACK_IMPORTED_MODULE_0__/* .BASE_CLOUD_URL */ .W1); });\r\n    };\r\n    DataHelper.generateInsertAndDeleteArr = function (entity, original) {\r\n        var originalArr = this.getImageArray(original);\r\n        var entityArr = this.getImageArray(entity);\r\n        var imageNormalDelete = [];\r\n        var imageNormalAdd = [];\r\n        originalArr.forEach(function (element) {\r\n            var img = entityArr.find(function (x) { return x === element; });\r\n            if (!img) {\r\n                imageNormalDelete.push(element);\r\n            }\r\n        });\r\n        entityArr.forEach(function (element) {\r\n            var img = originalArr.find(function (x) { return x === element; });\r\n            if (!img) {\r\n                imageNormalAdd.push(element);\r\n            }\r\n        });\r\n        return { imageNormalDelete: imageNormalDelete, imageNormalAdd: imageNormalAdd };\r\n    };\r\n    DataHelper.create_UUID = function () {\r\n        var dt = new Date().getTime();\r\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (dt + Math.random() * 16) % 16 | 0;\r\n            dt = Math.floor(dt / 16);\r\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n        return uuid;\r\n    };\r\n    DataHelper.convertToNonAccent = function (str) {\r\n        var text = '';\r\n        if (str != null && str !== '') {\r\n            text = str.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n        }\r\n        return text;\r\n    };\r\n    DataHelper.generateColorByString = function (str) {\r\n        str = str || \"\";\r\n        var hash = 0;\r\n        var s = str.length > 0 ? 90 : 1; // saturation\r\n        var l = str.length > 0 ? 25 : 90; // lightness\r\n        for (var i = 0; i < str.length; i++) {\r\n            hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n        }\r\n        var h = hash % 360;\r\n        return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';\r\n    };\r\n    return DataHelper;\r\n}());\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXYvLi9zcmMvdXRpbHMvZGF0YS1oZWxwZXIudHM/MTI0NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQytEO0FBQ0k7QUFDdkM7QUFFNUI7SUFBQTtJQXVOQSxDQUFDO0lBdE5VLG9CQUFTLEdBQWhCLFVBQW9CLE1BQVc7UUFDM0IsSUFBSSxNQUFNLEtBQUssU0FBUztZQUFFLE9BQU8sU0FBUyxDQUFDO1FBQzNDLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFTSx5QkFBYyxHQUFyQixVQUFzQixHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUU7UUFDL0IsSUFBSSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQ0FBa0M7UUFDdkUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQVksMEJBQTBCO0lBQ3BFLENBQUM7SUFFTSx3QkFBYSxHQUFwQixVQUFxQixJQUFJLEVBQUUsNEJBQWdDO1FBQWhDLCtFQUFnQztRQUN2RCxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFDLElBQUksUUFBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBZixDQUFlLENBQUMsQ0FBQztRQUM3RCxJQUFNLFNBQVMsR0FBRyxFQUFFO1FBQ3BCLElBQU0sU0FBUyxHQUFHLENBQUMsNEJBQTRCLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzNELEtBQUssSUFBSSxLQUFLLEdBQUcsNEJBQTRCLEdBQUcsRUFBRSxFQUFFLEtBQUssR0FBRyxTQUFTLEVBQUUsS0FBSyxFQUFF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QUUsQ0FBQyxDQUFDO1NBQy9EO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVNLGdDQUFxQixHQUE1QixVQUE2QixHQUFXO1FBQ3BDLEdBQUcsR0FBRyxHQUFHLElBQUksRUFBRSxDQUFDO1FBQ2hCLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztRQUNiLElBQU0sQ0FBQyxHQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWE7UUFDL0MsSUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVk7UUFDL0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztTQUNuRDtRQUVELElBQUksQ0FBQyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7UUFDbkIsT0FBTyxNQUFNLEdBQUMsQ0FBQyxHQUFDLElBQUksR0FBQyxDQUFDLEdBQUMsS0FBSyxHQUFDLENBQUMsR0FBQyxJQUFJLENBQUM7SUFDeEMsQ0FBQztJQUNMLGlCQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiIxMTY2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7IEJBU0VfQ0xPVURfVVJMIH0gZnJvbSAnLi8uLi9jb25zdGFudC9jb21tb24tY29uc3RhbnQnO1xyXG5pbXBvcnQgeyBXRUFUSEVSX1RZUEUgfSBmcm9tICdAL2NvbnN0YW50L2ZvcmNhc3Qtc3RhdGlvbi1jb25zdGFudCc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRhSGVscGVyIHtcclxuICAgIHN0YXRpYyBkZWVwQ2xvbmU8VD4oc291cmNlOiBhbnkpOiBUIHtcclxuICAgICAgICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHNvdXJjZSk7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGluc2VydEFuZFNoaWZ0KGFyciwgZnJvbSwgdG8pIHtcclxuICAgICAgICBsZXQgY3V0T3V0ID0gYXJyLnNwbGljZShmcm9tLCAxKVswXTsgLy8gY3V0IHRoZSBlbGVtZW50IGF0IGluZGV4ICdmcm9tJ1xyXG4gICAgICAgIGFyci5zcGxpY2UodG8sIDAsIGN1dE91dCk7ICAgICAgICAgICAgLy8gaW5zZXJ0IGl0IGF0IGluZGV4ICd0bydcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TWluTWF4VGVtcCh0ZW1wLCBmb3JlY2FzdERhdGVBcHBseVdpdGhDdXJyZW50ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IGhvdXJzID0gT2JqZWN0LmtleXModGVtcCkuZmlsdGVyKHggPT4geC5pbmNsdWRlcygnXycpKTtcclxuICAgICAgICBjb25zdCB0ZW1wVmFsdWUgPSBbXVxyXG4gICAgICAgIGNvbnN0IGxpbWl0RGF0ZSA9IChmb3JlY2FzdERhdGVBcHBseVdpdGhDdXJyZW50ICogMjQpICsgMjQ7XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSBmb3JlY2FzdERhdGVBcHBseVdpdGhDdXJyZW50ICogMjQ7IGluZGV4IDwgbGltaXREYXRlOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHRlbXBWYWx1ZS5wdXNoKHRlbXBbaG91cnNbaW5kZXhdXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1pbjogTWF0aC5taW4oLi4udGVtcFZhbHVlKSxcclxuICAgICAgICAgICAgbWF4OiBNYXRoLm1heCguLi50ZW1wVmFsdWUpLFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RGF0YUJ5SG91cih0ZW1wLCBvZmZzZXQpIHtcclxuICAgICAgICBsZXQgaG91cnMgPSBPYmplY3Qua2V5cyh0ZW1wKS5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKCdfJykpO1xyXG4gICAgICAgIGhvdXJzID0gaG91cnMuc29ydCgoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChhLnN1YnN0cigxKSwgMTApIC0gcGFyc2VJbnQoYi5zdWJzdHIoMSksIDEwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmVmRGF0ZSA9IE9iamVjdC5rZXlzKHRlbXApLmZpbHRlcih4ID0+IHguaW5jbHVkZXMoJ3JlZkRhdGUnKSk7XHJcbiAgICAgICAgY29uc3QgZGlmZkhvdXJzID0gbW9tZW50KCkuYWRkKG9mZnNldCwgJ2hvdXJzJykuZGlmZihtb21lbnQodGVtcFtyZWZEYXRlWzBdXSksICdob3VycycpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRpZmZIb3VycztcclxuICAgICAgICByZXR1cm4gdGVtcFtob3Vyc1tyZXN1bHRdXTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TW9zdEZyZXF1ZW50SWNvbih0ZW1wLCBkYXRlKSB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIb3VyID0gbmV3IERhdGUoKS5nZXRIb3VycygpO1xyXG4gICAgICAgIGxldCBjdXJyZW50SG91ciA9IG9yaWdpbmFsSG91cjtcclxuICAgICAgICBsZXQgYXJyID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgICAgIC8vIEdldCBtb3N0IGZyZXF1ZW50IGljb24gYXQgZGF5bGlnaHQgZnJvbSA2OjAwIHRvIDE4OjAwIGZvciBuZXh0IDUgZGF5XHJcbiAgICAgICAgaWYgKGN1cnJlbnRIb3VyID49IDYgJiYgY3VycmVudEhvdXIgPD0gMTgpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGUgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudEhvdXIgPSA2O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudEhvdXI7IGkgPD0gMTg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2goRGF0YUhlbHBlci5nZXREYXRhQnlEYXRlSG91cih0ZW1wLCBkYXRlLCBpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gR2V0IG1vc3QgZnJlcXVlbnQgaWNvbiBhdCBuaWdodCBmcm9tIDE5OjAwIHRvIDU6MDAgbmV4dCBkYXkgZm9yIG5leHQgNSBkYXlcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRhdGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRIb3VyID49IDAgJiYgY3VycmVudEhvdXIgPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIb3VyID0gY3VycmVudEhvdXIgKyAyNDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRIb3VyID0gMTk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBjdXJyZW50SG91cjsgaSA8PSA1ICsgMjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPD0gMjMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxIb3VyID4gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChEYXRhSGVscGVyLmdldERhdGFCeURhdGVIb3VyKHRlbXAsIGRhdGUsIGkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChEYXRhSGVscGVyLmdldERhdGFCeURhdGVIb3VyKHRlbXAsIGRhdGUgLSAxLCBpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxIb3VyID4gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChEYXRhSGVscGVyLmdldERhdGFCeURhdGVIb3VyKHRlbXAsIGRhdGUgKyAxLCBpIC0gMjQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChEYXRhSGVscGVyLmdldERhdGFCeURhdGVIb3VyKHRlbXAsIGRhdGUsIGkgLSAyNCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGhhc2htYXAgPSBhcnIucmVkdWNlKChhY2MsIHZhbCkgPT4ge1xyXG4gICAgICAgICAgICBhY2NbdmFsXSA9IChhY2NbdmFsXSB8fCAwICkgKyAxXHJcbiAgICAgICAgICAgIHJldHVybiBhY2NcclxuICAgICAgICB9LHt9KVxyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhoYXNobWFwKS5yZWR1Y2UoKGEsIGIpID0+IGhhc2htYXBbYV0gPiBoYXNobWFwW2JdID8gYSA6IGIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRNb3N0RnJlcXVlbnQodGVtcCwgd2VhdGhlclR5cGUpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50SG91ciA9IG5ldyBEYXRlKCkuZ2V0SG91cnMoKTtcclxuICAgICAgICBsZXQgYXJyID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgICAgIGlmICh3ZWF0aGVyVHlwZSA9PT0gV0VBVEhFUl9UWVBFLldpbmREaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgdGVtcC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2goZWxlbWVudC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2VhdGhlclR5cGUgPT09IFdFQVRIRVJfVFlQRS5XZWF0aGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SG91ciA+PSA2ICYmIGN1cnJlbnRIb3VyIDw9IDE4KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gNjsgaSA8PSAxODsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZW1wW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0ZW1wW2ldLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgNiB8fCBpID4gMTgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZW1wW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0ZW1wW2ldLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBjb25zdCBoYXNobWFwID0gYXJyLnJlZHVjZSgoYWNjLCB2YWwpID0+IHtcclxuICAgICAgICAgICAgYWNjW3ZhbF0gPSAoYWNjW3ZhbF0gfHwgMCApICsgMVxyXG4gICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgfSx7fSlcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoaGFzaG1hcCkucmVkdWNlKChhLCBiKSA9PiBoYXNobWFwW2FdID4gaGFzaG1hcFtiXSA/IGEgOiBiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TW9zdEZyZXF1ZW50QnlIb3Jpem9udGFsKHRlbXApIHtcclxuICAgICAgICBsZXQgYXJyOiBhbnkgPSBbXTtcclxuICAgICAgICB0ZW1wLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGFyci5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBoYXNobWFwID0gYXJyLnJlZHVjZSgoYWNjLCB2YWwpID0+IHtcclxuICAgICAgICAgICAgYWNjW3ZhbF0gPSAoYWNjW3ZhbF0gfHwgMCApICsgMVxyXG4gICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgfSx7fSlcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoaGFzaG1hcCkucmVkdWNlKChhLCBiKSA9PiBoYXNobWFwW2FdID4gaGFzaG1hcFtiXSA/IGEgOiBiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RGF0YUJ5RGF0ZUhvdXIodGVtcCwgZGF0ZSwgdGltZSkge1xyXG4gICAgICAgIGxldCBob3VycyA9IE9iamVjdC5rZXlzKHRlbXApLmZpbHRlcih4ID0+IHguaW5jbHVkZXMoJ18nKSk7XHJcbiAgICAgICAgaG91cnMgPSBob3Vycy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChhLnN1YnN0cigxKSwgMTApIC0gcGFyc2VJbnQoYi5zdWJzdHIoMSksIDEwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmVmRGF0ZSA9IE9iamVjdC5rZXlzKHRlbXApLmZpbHRlcih4ID0+IHguaW5jbHVkZXMoJ3JlZkRhdGUnKSk7XHJcbiAgICAgICAgY29uc3QgZGlmZkhvdXJzID0gbW9tZW50KCkuYWRkKGRhdGUsICdkYXlzJykuaG91cnModGltZSkuZGlmZihtb21lbnQodGVtcFtyZWZEYXRlWzBdXSksICdob3VycycpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRpZmZIb3VycyA+IDAgPyBkaWZmSG91cnMgOiAxO1xyXG4gICAgICAgIHJldHVybiB0ZW1wW2hvdXJzW3Jlc3VsdF1dO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXREaXNwbGF5SG91cihvZmZzZXQpIHtcclxuICAgICAgICBsZXQgZGlzcGxheUhvdXIgPSBuZXcgRGF0ZSgpLmdldEhvdXJzKCkgKyBvZmZzZXQ7XHJcbiAgICAgICAgaWYgKGRpc3BsYXlIb3VyID4gMjMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRpc3BsYXlIb3VyIC0gMjQgKyAnOjAwJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpc3BsYXlIb3VyICsgJzowMCc7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEltYWdlQXJyYXkoaHRtbFN0cikge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBub2RlLmlubmVySFRNTCA9IGh0bWxTdHI7XHJcbiAgICAgICAgY29uc3Qgbm9kZUxpc3QgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIG5vZGVMaXN0LmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChlbC5zcmMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuZmlsdGVyKHggPT4geC5pbmNsdWRlcyhCQVNFX0NMT1VEX1VSTCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZUluc2VydEFuZERlbGV0ZUFycihlbnRpdHk6c3RyaW5nICwgb3JpZ2luYWw6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQXJyID0gdGhpcy5nZXRJbWFnZUFycmF5KG9yaWdpbmFsKTtcclxuICAgICAgICBjb25zdCBlbnRpdHlBcnIgPSB0aGlzLmdldEltYWdlQXJyYXkoZW50aXR5KTtcclxuICAgICAgICBjb25zdCBpbWFnZU5vcm1hbERlbGV0ZSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGltYWdlTm9ybWFsQWRkID0gW107XHJcbiAgICAgICAgb3JpZ2luYWxBcnIuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gZW50aXR5QXJyLmZpbmQoeCA9PiB4ID09PSBlbGVtZW50KTtcclxuICAgICAgICAgICAgaWYoIWltZykge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VOb3JtYWxEZWxldGUucHVzaChlbGVtZW50KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZW50aXR5QXJyLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IG9yaWdpbmFsQXJyLmZpbmQoeCA9PiB4ID09PSBlbGVtZW50KTtcclxuICAgICAgICAgICAgaWYgKCFpbWcpIHtcclxuICAgICAgICAgICAgICAgIGltYWdlTm9ybWFsQWRkLnB1c2goZWxlbWVudClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7IGltYWdlTm9ybWFsRGVsZXRlLCBpbWFnZU5vcm1hbEFkZCB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVfVVVJRCgpIHtcclxuICAgICAgICBsZXQgZHQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBsZXQgdXVpZCA9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgbGV0IHIgPSAoZHQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xyXG4gICAgICAgICAgICBkdCA9IE1hdGguZmxvb3IoZHQgLyAxNik7XHJcbiAgICAgICAgICAgIHJldHVybiAoYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpKS50b1N0cmluZygxNik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHV1aWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNvbnZlcnRUb05vbkFjY2VudChzdHI6IHN0cmluZykge1xyXG4gICAgICAgIGxldCB0ZXh0ID0gJyc7XHJcbiAgICAgICAgaWYgKHN0ciAhPSBudWxsICYmIHN0ciAhPT0gJycpIHtcclxuICAgICAgICAgICAgdGV4dCA9IHN0ci5ub3JtYWxpemUoXCJORkRcIikucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZUNvbG9yQnlTdHJpbmcoc3RyOiBzdHJpbmcpIHtcclxuICAgICAgICBzdHIgPSBzdHIgfHwgXCJcIjtcclxuICAgICAgICBsZXQgaGFzaCA9IDA7XHJcbiAgICAgICAgY29uc3QgcyA9c3RyLmxlbmd0aCA+IDAgPyA5MCA6IDE7IC8vIHNhdHVyYXRpb25cclxuICAgICAgICBjb25zdCBsID0gc3RyLmxlbmd0aCA+IDAgPyAyNTogOTA7IC8vIGxpZ2h0bmVzc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGhhc2ggPSBzdHIuY2hhckNvZGVBdChpKSArICgoaGFzaCA8PCA1KSAtIGhhc2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGggPSBoYXNoICUgMzYwO1xyXG4gICAgICAgIHJldHVybiAnaHNsKCcraCsnLCAnK3MrJyUsICcrbCsnJSknO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1166\n")}}]);